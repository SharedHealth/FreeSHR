apply plugin: 'java'

def localEnv = new Properties();
localEnv.load(new FileInputStream(file("${projectDir}/../env/local.properties")))

jar {
    baseName = 'bdeshr'
    version = '0.1-SNAPSHOT'
}

test.doFirst {
    project(":shr-api").tasks.startMockClientIndex.execute()
}

test {
    environment localEnv
}

test.finalizedBy(stopMockClientIndex)

dependencies {
    compile libraries.spring_boot, libraries.spring_data_cassandra
    testCompile testLibraries.mockito, testLibraries.junit, testLibraries.spring_test
}